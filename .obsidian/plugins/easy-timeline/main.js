/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var bn=Object.create;var nt=Object.defineProperty;var Un=Object.getOwnPropertyDescriptor;var Wn=Object.getOwnPropertyNames;var kn=Object.getPrototypeOf,Yn=Object.prototype.hasOwnProperty;var $t=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),vn=(r,e)=>{for(var t in e)nt(r,t,{get:e[t],enumerable:!0})},Ct=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Wn(e))!Yn.call(r,i)&&i!==t&&nt(r,i,{get:()=>e[i],enumerable:!(n=Un(e,i))||n.enumerable});return r};var q=(r,e,t)=>(t=r!=null?bn(kn(r)):{},Ct(e||!r||!r.__esModule?nt(t,"default",{value:r,enumerable:!0}):t,r)),Bn=r=>Ct(nt({},"__esModule",{value:!0}),r);var _t=$t((ut,mt)=>{(function(r,e){typeof ut=="object"&&typeof mt!="undefined"?mt.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(ut,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,f){return o=Number(o),this.$utils().p(f)===e?this.add(3*o,r):s.bind(this)(o,f)};var a=i.startOf;i.startOf=function(o,f){var m=this.$utils(),w=!!m.u(f)||f;if(m.p(o)===e){var A=this.quarter()-1;return w?this.month(3*A).startOf(r).startOf("day"):this.month(3*A+2).endOf(r).endOf("day")}return a.bind(this)(o,f)}}})});var X=$t((ht,pt)=>{(function(r,e){typeof ht=="object"&&typeof pt!="undefined"?pt.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(ht,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",f="week",m="month",w="quarter",A="year",S="date",L="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,de={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(h){var d=["th","st","nd","rd"],c=h%100;return"["+h+(d[(c-20)%10]||d[c]||d[0])+"]"}},H=function(h,d,c){var u=String(h);return!u||u.length>=d?h:""+Array(d+1-u.length).join(c)+h},z={s:H,z:function(h){var d=-h.utcOffset(),c=Math.abs(d),u=Math.floor(c/60),l=c%60;return(d<=0?"+":"-")+H(u,2,"0")+":"+H(l,2,"0")},m:function h(d,c){if(d.date()<c.date())return-h(c,d);var u=12*(c.year()-d.year())+(c.month()-d.month()),l=d.clone().add(u,m),p=c-l<0,g=d.clone().add(u+(p?-1:1),m);return+(-(u+(c-l)/(p?l-g:g-l))||0)},a:function(h){return h<0?Math.ceil(h)||0:Math.floor(h)},p:function(h){return{M:m,y:A,w:f,d:o,D:S,h:a,m:s,s:i,ms:n,Q:w}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(h){return h===void 0}},j="en",b={};b[j]=de;var et="$isDayjsObject",ue=function(h){return h instanceof ae||!(!h||!h[et])},Ee=function h(d,c,u){var l;if(!d)return j;if(typeof d=="string"){var p=d.toLowerCase();b[p]&&(l=p),c&&(b[p]=c,l=p);var g=d.split("-");if(!l&&g.length>1)return h(g[0])}else{var P=d.name;b[P]=d,l=P}return!u&&l&&(j=l),l||!u&&j},R=function(h,d){if(ue(h))return h.clone();var c=typeof d=="object"?d:{};return c.date=h,c.args=arguments,new ae(c)},x=z;x.l=Ee,x.i=ue,x.w=function(h,d){return R(h,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var ae=function(){function h(c){this.$L=Ee(c.locale,null,!0),this.parse(c),this.$x=this.$x||c.x||{},this[et]=!0}var d=h.prototype;return d.parse=function(c){this.$d=function(u){var l=u.date,p=u.utc;if(l===null)return new Date(NaN);if(x.u(l))return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){var g=l.match($);if(g){var P=g[2]-1||0,O=(g[7]||"0").substring(0,3);return p?new Date(Date.UTC(g[1],P,g[3]||1,g[4]||0,g[5]||0,g[6]||0,O)):new Date(g[1],P,g[3]||1,g[4]||0,g[5]||0,g[6]||0,O)}}return new Date(l)}(c),this.init()},d.init=function(){var c=this.$d;this.$y=c.getFullYear(),this.$M=c.getMonth(),this.$D=c.getDate(),this.$W=c.getDay(),this.$H=c.getHours(),this.$m=c.getMinutes(),this.$s=c.getSeconds(),this.$ms=c.getMilliseconds()},d.$utils=function(){return x},d.isValid=function(){return this.$d.toString()!==L},d.isSame=function(c,u){var l=R(c);return this.startOf(u)<=l&&l<=this.endOf(u)},d.isAfter=function(c,u){return R(c)<this.startOf(u)},d.isBefore=function(c,u){return this.endOf(u)<R(c)},d.$g=function(c,u,l){return x.u(c)?this[u]:this.set(l,c)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(c,u){var l=this,p=!!x.u(u)||u,g=x.p(c),P=function(fe,_){var K=x.w(l.$u?Date.UTC(l.$y,_,fe):new Date(l.$y,_,fe),l);return p?K:K.endOf(o)},O=function(fe,_){return x.w(l.toDate()[fe].apply(l.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(_)),l)},N=this.$W,C=this.$M,U=this.$D,me="set"+(this.$u?"UTC":"");switch(g){case A:return p?P(1,0):P(31,11);case m:return p?P(1,C):P(0,C+1);case f:var oe=this.$locale().weekStart||0,Ae=(N<oe?N+7:N)-oe;return P(p?U-Ae:U+(6-Ae),C);case o:case S:return O(me+"Hours",0);case a:return O(me+"Minutes",1);case s:return O(me+"Seconds",2);case i:return O(me+"Milliseconds",3);default:return this.clone()}},d.endOf=function(c){return this.startOf(c,!1)},d.$set=function(c,u){var l,p=x.p(c),g="set"+(this.$u?"UTC":""),P=(l={},l[o]=g+"Date",l[S]=g+"Date",l[m]=g+"Month",l[A]=g+"FullYear",l[a]=g+"Hours",l[s]=g+"Minutes",l[i]=g+"Seconds",l[n]=g+"Milliseconds",l)[p],O=p===o?this.$D+(u-this.$W):u;if(p===m||p===A){var N=this.clone().set(S,1);N.$d[P](O),N.init(),this.$d=N.set(S,Math.min(this.$D,N.daysInMonth())).$d}else P&&this.$d[P](O);return this.init(),this},d.set=function(c,u){return this.clone().$set(c,u)},d.get=function(c){return this[x.p(c)]()},d.add=function(c,u){var l,p=this;c=Number(c);var g=x.p(u),P=function(C){var U=R(p);return x.w(U.date(U.date()+Math.round(C*c)),p)};if(g===m)return this.set(m,this.$M+c);if(g===A)return this.set(A,this.$y+c);if(g===o)return P(1);if(g===f)return P(7);var O=(l={},l[s]=e,l[a]=t,l[i]=r,l)[g]||1,N=this.$d.getTime()+c*O;return x.w(N,this)},d.subtract=function(c,u){return this.add(-1*c,u)},d.format=function(c){var u=this,l=this.$locale();if(!this.isValid())return l.invalidDate||L;var p=c||"YYYY-MM-DDTHH:mm:ssZ",g=x.z(this),P=this.$H,O=this.$m,N=this.$M,C=l.weekdays,U=l.months,me=l.meridiem,oe=function(_,K,Pe,tt){return _&&(_[K]||_(u,p))||Pe[K].slice(0,tt)},Ae=function(_){return x.s(P%12||12,_,"0")},fe=me||function(_,K,Pe){var tt=_<12?"AM":"PM";return Pe?tt.toLowerCase():tt};return p.replace(G,function(_,K){return K||function(Pe){switch(Pe){case"YY":return String(u.$y).slice(-2);case"YYYY":return x.s(u.$y,4,"0");case"M":return N+1;case"MM":return x.s(N+1,2,"0");case"MMM":return oe(l.monthsShort,N,U,3);case"MMMM":return oe(U,N);case"D":return u.$D;case"DD":return x.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return oe(l.weekdaysMin,u.$W,C,2);case"ddd":return oe(l.weekdaysShort,u.$W,C,3);case"dddd":return C[u.$W];case"H":return String(P);case"HH":return x.s(P,2,"0");case"h":return Ae(1);case"hh":return Ae(2);case"a":return fe(P,O,!0);case"A":return fe(P,O,!1);case"m":return String(O);case"mm":return x.s(O,2,"0");case"s":return String(u.$s);case"ss":return x.s(u.$s,2,"0");case"SSS":return x.s(u.$ms,3,"0");case"Z":return g}return null}(_)||g.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(c,u,l){var p,g=this,P=x.p(u),O=R(c),N=(O.utcOffset()-this.utcOffset())*e,C=this-O,U=function(){return x.m(g,O)};switch(P){case A:p=U()/12;break;case m:p=U();break;case w:p=U()/3;break;case f:p=(C-N)/6048e5;break;case o:p=(C-N)/864e5;break;case a:p=C/t;break;case s:p=C/e;break;case i:p=C/r;break;default:p=C}return l?p:x.a(p)},d.daysInMonth=function(){return this.endOf(m).$D},d.$locale=function(){return b[this.$L]},d.locale=function(c,u){if(!c)return this.$L;var l=this.clone(),p=Ee(c,u,!0);return p&&(l.$L=p),l},d.clone=function(){return x.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},h}(),we=ae.prototype;return R.prototype=we,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",m],["$y",A],["$D",S]].forEach(function(h){we[h[1]]=function(d){return this.$g(d,h[0],h[1])}}),R.extend=function(h,d){return h.$i||(h(d,ae,R),h.$i=!0),R},R.locale=Ee,R.isDayjs=ue,R.unix=function(h){return R(1e3*h)},R.en=b[j],R.Ls=b,R.p={},R})});var ei={};vn(ei,{default:()=>dt});module.exports=Bn(ei);var Ut=q(_t(),1),Re=q(X(),1);var y;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(y||(y={}));var D;(function(r){r[r.SUNDAY=0]="SUNDAY",r[r.MONDAY=1]="MONDAY",r[r.TUESDAY=2]="TUESDAY",r[r.WEDNESDAY=3]="WEDNESDAY",r[r.THURSDAY=4]="THURSDAY",r[r.FRIDAY=5]="FRIDAY",r[r.SATURDAY=6]="SATURDAY"})(D||(D={}));var I;(function(r){r[r.JANUARY=1]="JANUARY",r[r.FEBRUARY=2]="FEBRUARY",r[r.MARCH=3]="MARCH",r[r.APRIL=4]="APRIL",r[r.MAY=5]="MAY",r[r.JUNE=6]="JUNE",r[r.JULY=7]="JULY",r[r.AUGUST=8]="AUGUST",r[r.SEPTEMBER=9]="SEPTEMBER",r[r.OCTOBER=10]="OCTOBER",r[r.NOVEMBER=11]="NOVEMBER",r[r.DECEMBER=12]="DECEMBER"})(I||(I={}));function It(r,e){e=e.add(1,"day"),ce(r,e),he(r,e)}function v(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}function rt(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",y.AM):r.assign("meridiem",y.PM)}function ce(r,e){r.imply("day",e.date()),r.imply("month",e.month()+1),r.imply("year",e.year())}function he(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}var gt=q(X(),1);var Fn={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:r=>bt(r,I.MARCH,D.SUNDAY,2),dstEnd:r=>bt(r,I.OCTOBER,D.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:r=>J(r,I.MARCH,D.SUNDAY,2,2),dstEnd:r=>J(r,I.NOVEMBER,D.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:r=>J(r,I.MARCH,D.SUNDAY,2,2),dstEnd:r=>J(r,I.NOVEMBER,D.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:r=>J(r,I.MARCH,D.SUNDAY,2,2),dstEnd:r=>J(r,I.NOVEMBER,D.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:r=>J(r,I.MARCH,D.SUNDAY,2,2),dstEnd:r=>J(r,I.NOVEMBER,D.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function J(r,e,t,n,i=0){let s=0,a=0;for(;a<n;)s++,new Date(r,e-1,s).getDay()===t&&a++;return new Date(r,e-1,s,i)}function bt(r,e,t,n=0){let i=t===0?7:t,s=new Date(r,e-1+1,1,12),a=s.getDay()===0?7:s.getDay(),o;return a===i?o=7:a<i?o=7+a-i:o=a-i,s.setDate(s.getDate()-o),new Date(r,e-1,s.getDate(),n)}function it(r,e,t={}){var i;if(r==null)return null;if(typeof r=="number")return r;let n=(i=t[r])!=null?i:Fn[r];return n==null?null:typeof n=="number"?n:e==null?null:(0,gt.default)(e).isAfter(n.dstStart(e.getFullYear()))&&!(0,gt.default)(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}Re.default.extend(Ut.default);var Q=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!=null?t:new Date,this.timezoneOffset=it(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(e,t){var s;(!e||e.getTime()<0)&&(e=new Date);let n=-e.getTimezoneOffset(),i=(s=t!=null?t:this.timezoneOffset)!=null?s:n;return n-i}},T=class{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=(0,Re.default)(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new T(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")&&!this.isCertain("year")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,Re.default)(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+t*6e4)}addTag(e){return this._tags.add(e),this}addTags(e){for(let t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=(0,Re.default)(e.instant);for(let s in t)n=n.add(t[s],s);let i=new T(e);return t.hour||t.minute||t.second?(rt(i,n),v(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(he(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):t.week?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year()),i.imply("weekday",n.day())):(i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}},B=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new T(e),this.end=s}clone(){let e=new B(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){let e=new Set(this.start.tags());if(this.end)for(let t of this.end.tags())e.add(t);return e}toString(){let e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}};function Tt(r,e,t="\\s{0,5},?\\s{0,5}"){let n=e.replace(/\((?!\?)/g,"(?:");return`${r}${n}(?:${t}${n}){0,10}`}function Ln(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}function M(r){return`(?:${Ln(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}var Wt=q(X(),1);function st(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}function ee(r,e,t){let n=(0,Wt.default)(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}var Et={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},wt={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},W={...wt,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},yt={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},xt={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},Yt={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},Oe={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...Yt},vt=`(?:${M(yt)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Gn(r){let e=r.toLowerCase();return yt[e]!==void 0?yt[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}var pe=`(?:${M(xt)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function ge(r){let e=r.toLowerCase();return xt[e]!==void 0?xt[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}var te="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function ne(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return st(e)}var Bt=`(${vt})\\s{0,3}(${M(Oe)})`,kt=new RegExp(Bt,"i"),Hn=`(${vt})\\s{0,3}(${M(Yt)})`,Ft="\\s{0,5},?(?:\\s*and)?\\s{0,5}",V=Tt("(?:(?:about|around)\\s{0,3})?",Bt,Ft),re=Tt("(?:(?:about|around)\\s{0,3})?",Hn,Ft);function k(r){let e={},t=r,n=kt.exec(t);for(;n;)zn(e,n),t=t.substring(n[0].length).trim(),n=kt.exec(t);return Object.keys(e).length==0?null:e}function zn(r,e){if(e[0].match(/^[a-zA-Z]+$/))return;let t=Gn(e[1]),n=Oe[e[2].toLowerCase()];r[n]=t}var E=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(e,t){var i;let n=(i=t[1])!=null?i:"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};var jn=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${V})(?=\\W|$)`,"i"),Vn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${V})(?=\\W|$)`,"i"),Zn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${re})(?=\\W|$)`,"i"),De=class extends E{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?Zn:e.option.forwardDate?jn:Vn}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;let n=k(t[1]);return n?T.createRelativeFromReference(e.reference,n):null}};var Kn=new RegExp(`(?:on\\s{0,3})?(${pe})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${pe}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${M(W)})(?:(?:-|/|,?\\s{0,3})(${te}(?!\\w)))?(?=\\W|$)`,"i"),Lt=1,Gt=2,qn=3,Ht=4,Ne=class extends E{innerPattern(){return Kn}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=W[t[qn].toLowerCase()],s=ge(t[Lt]);if(s>31)return t.index=t.index+t[Lt].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ht]){let a=ne(t[Ht]);n.start.assign("year",a)}else{let a=ee(e.refDate,s,i);n.start.imply("year",a)}if(t[Gt]){let a=ge(t[Gt]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};var Xn=new RegExp(`(${M(W)})(?:-|/|\\s*,?\\s*)(${pe})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${pe})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${te}))?(?=\\W|$)(?!\\:\\d)`,"i"),Jn=1,zt=2,At=3,Pt=4,Me=class extends E{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return Xn}innerExtract(e,t){let n=W[t[Jn].toLowerCase()],i=ge(t[zt]);if(i>31||this.shouldSkipYearLikeDate&&!t[At]&&!t[Pt]&&t[zt].match(/^2[0-5]$/))return null;let s=e.createParsingComponents({day:i,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[Pt]){let f=ne(t[Pt]);s.assign("year",f)}else{let f=ee(e.refDate,i,n);s.imply("year",f)}if(!t[At])return s;let a=ge(t[At]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};var Qn=new RegExp(`((?:in)\\s*)?(${M(W)})\\s*(?:[,-]?\\s*(${te})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),er=1,tr=2,jt=3,Se=class extends E{innerPattern(){return Qn}innerExtract(e,t){let n=t[tr].toLowerCase();if(t[0].length<=3&&!wt[n])return null;let i=e.createParsingResult(t.index+(t[er]||"").length,t.index+t[0].length);i.start.imply("day",1),i.start.addTag("parser/ENMonthNameParser");let s=W[n];if(i.start.assign("month",s),t[jt]){let a=ne(t[jt]);i.start.assign("year",a)}else{let a=ee(e.refDate,1,s);i.start.imply("year",a)}return i}};var nr=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${M(W)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),rr=1,ir=2,Vt=3,sr=4,$e=class extends E{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return nr}innerExtract(e,t){let n=parseInt(t[rr]),i=parseInt(t[sr]),s=t[Vt]?parseInt(t[Vt]):W[t[ir].toLowerCase()];if(s<1||s>12){if(this.strictMonthDateOrder)return null;i>=1&&i<=12&&([s,i]=[i,s])}return i<1||i>31?null:{day:i,month:s,year:n}}};var ar=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),or=1,fr=2,Ce=class extends E{innerPattern(){return ar}innerExtract(e,t){let n=parseInt(t[fr]),i=parseInt(t[or]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};function cr(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function lr(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Zt=2,Te=3,at=4,ot=5,_e=6,ft=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),m=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&m&&(m[0].match(/^\s*([+-])\s*\d{2,4}$/)||m[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))?null:!m||m[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,m,a),a.end&&(a.text+=m[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Zt]);if(o>100){if(this.strictMode||t[Te]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Te]!=null){if(t[Te].length==1&&!t[_e])return null;s=parseInt(t[Te])}if(s>=60)return null;if(o>12&&(a=y.PM),t[_e]!=null){if(o>12)return null;let f=t[_e][0].toLowerCase();f=="a"&&(a=y.AM,o==12&&(o=0)),f=="p"&&(a=y.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",y.AM):i.imply("meridiem",y.PM),t[ot]!=null){let f=parseInt(t[ot].substring(0,3));if(f>=1e3)return null;i.assign("millisecond",f)}if(t[at]!=null){let f=parseInt(t[at]);if(f>=60)return null;i.assign("second",f)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[ot]!=null){let f=parseInt(t[ot].substring(0,3));if(f>=1e3)return null;i.assign("millisecond",f)}if(t[at]!=null){let f=parseInt(t[at]);if(f>=60)return null;i.assign("second",f)}let s=parseInt(t[Zt]),a=0,o=-1;if(t[Te]!=null?a=parseInt(t[Te]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=y.PM),t[_e]!=null){if(s>12)return null;let f=t[_e][0].toLowerCase();f=="a"&&(o=y.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),f=="p"&&(o=y.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==y.AM?(n.start.imply("meridiem",y.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",y.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",y.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",y.PM)):s>12?i.imply("meridiem",y.PM):s<=12&&i.imply("meridiem",y.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=cr(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=lr(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};var Ie=class extends ft{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(!n)return n;if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",y.PM)):i<6&&n.assign("meridiem",y.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",y.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}return t[0].endsWith("morning")&&(n.assign("meridiem",y.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}};function ie(r){let e={};for(let t in r)e[t]=-r[t];return e}function Kt(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}var dr=new RegExp(`(${V})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),ur=new RegExp(`(${re})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),be=class extends E{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ur:dr}innerExtract(e,t){let n=k(t[1]);if(!n)return null;let i=ie(n);return T.createRelativeFromReference(e.reference,i)}};var mr=new RegExp(`(${V})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),hr=new RegExp(`(${re})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),pr=1,Ue=class extends E{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?hr:mr}innerExtract(e,t){let n=k(t[pr]);return n?T.createRelativeFromReference(e.reference,n):null}};var ct=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}},Y=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let f=i,m=s,w=this.mergeResults(o,f,m,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${f} and ${m} into ${w}`)}),i=w}}return i!=null&&n.push(i),n}};var We=class extends Y{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.imply(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.imply(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isDateWithUnknownYear()&&a.add(1,"years").isAfter(s)?(a=a.add(1,"years"),n.start.imply("year",a.year())):t.start.isDateWithUnknownYear()&&s.add(-1,"years").isBefore(a)?(s=s.add(-1,"years"),t.start.imply("year",s.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};var ke=class extends We{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}};function Rt(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=qt(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=qt(s,a);if(r.end==null&&o.date().getTime()<t.start.date().getTime()){let f=o.dayjs().add(1,"day");o.isCertain("day")?v(o,f):ce(o,f)}t.end=o}return t}function qt(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==y.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t.addTags(r.tags()),t.addTags(e.tags()),t}var Ye=class extends Y{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Rt(t,n):Rt(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};var ye=class extends Ye{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|\u2219|:)?\\s*$")}};var gr=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),ve=class{constructor(e){this.timezoneOverrides=e}refine(e,t){var i;let n=(i=e.option.timezones)!=null?i:{};return t.forEach(s=>{var L,$;let a=e.text.substring(s.index+s.text.length),o=gr.exec(a);if(!o)return;let f=o[1].toUpperCase(),m=($=(L=s.start.date())!=null?L:s.refDate)!=null?$:new Date,w={...this.timezoneOverrides,...n},A=it(f,m,w);if(A==null)return;e.debug(()=>{console.log(`Extracting timezone: '${f}' into: ${A} for: ${s.start}`)});let S=s.start.get("timezoneOffset");S!==null&&A!=S&&(s.start.isCertain("timezoneOffset")||f!=o[1])||s.start.isOnlyDate()&&f!=o[1]||(s.text+=o[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",A),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",A))}),t}};var Tr=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),yr=1,xr=2,Er=3,Be=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Tr.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[xr]),o=parseInt(s[Er]||"0"),f=a*60+o;f>14*60||(s[yr]==="-"&&(f=-f),n.end!=null&&n.end.assign("timezoneOffset",f),n.start.assign("timezoneOffset",f),n.text+=s[0])}),t}};var se=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];if(a.index>=i.index+i.text.length){n.push(i),i=a;continue}let o=null,f=null;a.text.length>i.text.length?(o=a,f=i):(o=i,f=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${f} by ${o}`)}),i=o}return i!=null&&n.push(i),n}};var Xt=q(X(),1);var Fe=class{refine(e,t){return e.option.forwardDate&&t.forEach(n=>{let i=(0,Xt.default)(e.refDate);if(n.start.isOnlyTime()&&i.isAfter(n.start.dayjs())&&(i=i.add(1,"day"),ce(n.start,i),n.end&&n.end.isOnlyTime()&&(ce(n.end,i),n.start.dayjs().isAfter(n.end.dayjs())&&(i=i.add(1,"day"),ce(n.end,i))),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} time result (${n.start})`)})),n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.end})`)}))),n.start.isDateWithUnknownYear()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} year (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} month (${n.start})`)}))}),t}};var Le=class extends ct{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};var wr=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Ar=1,Pr=2,Rr=3,Jt=4,Or=5,Qt=6,en=7,Dr=8,tn=9,nn=10,Ge=class extends E{innerPattern(){return wr}innerExtract(e,t){let n=e.createParsingComponents({year:parseInt(t[Ar]),month:parseInt(t[Pr]),day:parseInt(t[Rr])});if(t[Jt]!=null&&(n.assign("hour",parseInt(t[Jt])),n.assign("minute",parseInt(t[Or])),t[Qt]!=null&&n.assign("second",parseInt(t[Qt])),t[en]!=null&&n.assign("millisecond",parseInt(t[en])),t[Dr]!=null)){let i=0;if(t[tn]){let s=parseInt(t[tn]),a=0;t[nn]!=null&&(a=parseInt(t[nn])),i=s*60,i<0?i-=a:i+=a}n.assign("timezoneOffset",i)}return n.addTag("parser/ISOFormatParser")}};var He=class extends Y{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};function rn(r,e=!1){return r.parsers.unshift(new Ge),r.refiners.unshift(new He),r.refiners.unshift(new Be),r.refiners.unshift(new se),r.refiners.push(new ve),r.refiners.push(new se),r.refiners.push(new Fe),r.refiners.push(new Le(e)),r}var Tn=q(X(),1);var xe=q(X(),1);function sn(r){let e=(0,xe.default)(r.instant),t=new T(r,{});return v(t,e),rt(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t.addTag("casualReference/now"),t}function an(r){let e=(0,xe.default)(r.instant),t=new T(r,{});return v(t,e),he(t,e),t.addTag("casualReference/today"),t}function on(r){return Nr(r,1).addTag("casualReference/yesterday")}function Nr(r,e){return cn(r,-e)}function fn(r){return cn(r,1).addTag("casualReference/tomorrow")}function cn(r,e){let t=(0,xe.default)(r.instant),n=new T(r,{});return t=t.add(e,"day"),v(n,t),he(n,t),n}function ln(r,e=22){let t=(0,xe.default)(r.instant),n=new T(r,{});return v(n,t),n.imply("hour",e),n.imply("meridiem",y.PM),n.addTag("casualReference/tonight"),n}function dn(r,e=20){let t=new T(r,{});return t.imply("meridiem",y.PM),t.imply("hour",e),t.addTag("casualReference/evening"),t}function un(r){let e=new T(r,{}),t=(0,xe.default)(r.instant);return t.hour()>2&&It(e,t),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/midnight"),e}function mn(r,e=6){let t=new T(r,{});return t.imply("meridiem",y.AM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/morning"),t}function hn(r,e=15){let t=new T(r,{});return t.imply("meridiem",y.PM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/afternoon"),t}function pn(r){let e=new T(r,{});return e.imply("meridiem",y.AM),e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/noon"),e}var Mr=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,ze=class extends E{innerPattern(e){return Mr}innerExtract(e,t){let n=(0,Tn.default)(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":s=sn(e.reference);break;case"today":s=an(e.reference);break;case"yesterday":s=on(e.reference);break;case"tomorrow":case"tmr":case"tmrw":s=fn(e.reference);break;case"tonight":s=ln(e.reference);break;default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),v(s,n),s.imply("hour",0));break}return s.addTag("parser/ENCasualDateParser"),s}};var Sr=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,je=class extends E{innerPattern(){return Sr}innerExtract(e,t){let n=null;switch(t[1].toLowerCase()){case"afternoon":n=hn(e.reference);break;case"evening":case"night":n=dn(e.reference);break;case"midnight":n=un(e.reference);break;case"morning":n=mn(e.reference);break;case"noon":case"midday":n=pn(e.reference);break}return n&&n.addTag("parser/ENCasualTimeParser"),n}};function yn(r,e,t){let n=r.getDateWithAdjustedTimezone(),i=$r(n,e,t),s=new T(r);return s=Kt(s,{day:i}),s.assign("weekday",e),s}function $r(r,e,t){let n=r.getDay();switch(t){case"this":return lt(r,e);case"last":return xn(r,e);case"next":return n==D.SUNDAY?e==D.SUNDAY?7:e:n==D.SATURDAY?e==D.SATURDAY?7:e==D.SUNDAY?8:1+e:e<n&&e!=D.SUNDAY?lt(r,e):lt(r,e)+7}return Cr(r,e)}function Cr(r,e){let t=xn(r,e),n=lt(r,e);return n<-t?n:t}function lt(r,e){let t=r.getDay(),n=e-t;return n<0&&(n+=7),n}function xn(r,e){let t=r.getDay(),n=e-t;return n>=0&&(n-=7),n}var _r=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${M(Et)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Ir=1,br=2,Ur=3,Ve=class extends E{innerPattern(){return _r}innerExtract(e,t){let n=t[br].toLowerCase(),i=Et[n],s=t[Ir],a=t[Ur],o=s||a;o=o||"",o=o.toLowerCase();let f=null;return o=="last"||o=="past"?f="last":o=="next"?f="next":o=="this"&&(f="this"),yn(e.reference,i,f)}};var En=q(X(),1);var Wr=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${M(Oe)})(?=\\s*)(?=\\W|$)`,"i"),kr=1,Yr=2,Ze=class extends E{innerPattern(){return Wr}innerExtract(e,t){let n=t[kr].toLowerCase(),i=t[Yr].toLowerCase(),s=Oe[i];if(n=="next"||n.startsWith("after")){let f={};return f[s]=1,T.createRelativeFromReference(e.reference,f)}if(n=="last"||n=="past"){let f={};return f[s]=-1,T.createRelativeFromReference(e.reference,f)}let a=e.createParsingComponents(),o=(0,En.default)(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};var vr=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Br=1,Fr=5,wn=2,An=3,Ot=4,Ke=class{constructor(e){this.groupNumberMonth=e?An:wn,this.groupNumberDay=e?wn:An}pattern(){return vr}extract(e,t){let n=t.index+t[Br].length,i=t.index+t[0].length-t[Fr].length;if(n>0&&e.text.substring(0,n).match("\\d/?$")||i<e.text.length&&e.text.substring(i).match("^/?\\d"))return;let s=e.text.substring(n,i);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Ot]&&s.indexOf("/")<0)return;let a=e.createParsingResult(n,s),o=parseInt(t[this.groupNumberMonth]),f=parseInt(t[this.groupNumberDay]);if((o<1||o>12)&&o>12)if(f>=1&&f<=12&&o<=31)[f,o]=[o,f];else return null;if(f<1||f>31)return null;if(a.start.assign("day",f),a.start.assign("month",o),t[Ot]){let m=parseInt(t[Ot]),w=st(m);a.start.assign("year",w)}else{let m=ee(e.refDate,f,o);a.start.imply("year",m)}return a}};var Lr=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${V})(?=\\W|$)`,"i"),Gr=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${re})(?=\\W|$)`,"i"),qe=class extends E{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?Lr:Gr}innerExtract(e,t){let n=t[1].toLowerCase(),i=k(t[2]);if(!i)return null;switch(n){case"last":case"past":case"-":i=ie(i);break}return T.createRelativeFromReference(e.reference,i)}};function Hr(r){return r.text.match(/^[+-]/i)!=null}function Pn(r){return r.text.match(/^-/i)!=null}var Xe=class extends Y{shouldMergeResults(e,t,n){return e.match(/^\s*$/i)?Hr(n)||Pn(n):!1}mergeResults(e,t,n,i){let s=k(n.text);Pn(n)&&(s=ie(s));let a=T.createRelativeFromReference(new Q(t.start.date()),s);return new B(t.reference,t.index,`${t.text}${e}${n.text}`,a)}};function Rn(r){return r.text.match(/\s+(before|from)$/i)!=null}function zr(r){return r.text.match(/\s+(after|since)$/i)!=null}var Je=class extends Y{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Rn(t)&&!zr(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=k(t.text);Rn(t)&&(i=ie(i));let s=T.createRelativeFromReference(new Q(n.start.date()),i);return new B(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};var jr=new RegExp(`^\\s*(${te})`,"i"),Vr=1,Qe=class{refine(e,t){return t.forEach(function(n){if(!n.start.isDateWithUnknownYear())return;let i=e.text.substring(n.index+n.text.length),s=jr.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting year: '${s[0]}' into : ${n}`)});let a=ne(s[Vr]);n.end!=null&&n.end.assign("year",a),n.start.assign("year",a),n.text+=s[0]}),t}};var le=class{createCasualConfiguration(e=!1){let t=this.createConfiguration(!1,e);return t.parsers.push(new ze),t.parsers.push(new je),t.parsers.push(new Se),t.parsers.push(new Ze),t.parsers.push(new qe),t}createConfiguration(e=!0,t=!1){let n=rn({parsers:[new Ke(t),new De(e),new Ne,new Me(t),new Ve,new Ce,new Ie(e),new be(e),new Ue(e)],refiners:[new ye]},e);return n.parsers.unshift(new $e(e)),n.refiners.unshift(new Je),n.refiners.unshift(new Xe),n.refiners.unshift(new se),n.refiners.push(new ye),n.refiners.push(new Qe),n.refiners.push(new ke),n}};var Z=class{constructor(e){this.defaultConfig=new le,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Z({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Dt(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Z.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let f=o.index+s.length-a.length;o.index=f;let m=t.extract(e,o);if(!m){a=s.substring(o.index+1),o=i.exec(a);continue}let w=null;m instanceof B?w=m:m instanceof T?(w=e.createParsingResult(o.index,o[0]),w.start=m):w=e.createParsingResult(o.index,o[0],m);let A=w.index,S=w.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${A}) '${S}'`)),n.push(w),a=s.substring(A+S.length),o=i.exec(a)}return n}},Dt=class{constructor(e,t,n){this.text=e,this.reference=new Q(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof T?e:new T(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new B(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};var Nt=new le,On=new Z(Nt.createCasualConfiguration(!1)),Dn=new Z(Nt.createConfiguration(!0,!1)),to=new Z(Nt.createCasualConfiguration(!0));var Mt=Dn,Kr=On;function Nn(r,e,t){return Kr.parseDate(r,e,t)}var F=require("obsidian");function Mn(r){let e=/^(#+)\s+(.*)$/,t=r.match(e);return t?t[2]:null}function Sn(r){let e=/\[[^\[\]]+::?\s*([^\[\]]+)\]/g;return r.replace(e,"$1")}function $n(r){let e=/\[([^\[\]]+)::?\s*([^\[\]]+)\]/g,t={},n;for(;(n=e.exec(r))!==null;){let i=n[1].trim(),s=n[2].trim(),a=i.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");t[a]=s}return t}function Cn(r){let e=/(?:\[(\w+)\s*::?\s*([^\[\]]+)\]|\b(\w+)\s*:\s*([^\[\]]+)\b)/g,t={};return r.split(`
`).forEach(i=>{let s;for(;(s=e.exec(i))!==null;){let a=s[1]||s[3],o=s[2]||s[4],f=a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");t[f]=o.trim()}}),t}var _n=require("obsidian");function qr(r){let e={year:"numeric",month:"long"};return r.toLocaleDateString(void 0,e)}function Xr(r){let e={day:"numeric",weekday:"long"};return r.toLocaleDateString(void 0,e)}function Jr(r,e="asc"){r.sort((s,a)=>e==="asc"?s.date.getTime()-a.date.getTime():a.date.getTime()-s.date.getTime());let t={};r.forEach(s=>{let a=s.date,o=qr(a),f=Xr(a);t[o]||(t[o]={}),t[o][f]||(t[o][f]=[]),t[o][f].push(s)});let n={},i=(s,a)=>e==="asc"?new Date(s).getTime()-new Date(a).getTime():new Date(a).getTime()-new Date(s).getTime();return Object.keys(t).sort(i).forEach(s=>{n[s]={},Object.keys(t[s]).sort(i).forEach(a=>{n[s][a]=t[s][a]})}),n}function In(r,e="asc"){let t=createEl("div",{cls:"container"}),n=createEl("div",{cls:"timeline"});t.appendChild(n);let i=Jr(r,e);return Object.entries(i).forEach(([s,a])=>{let o=createEl("div",{cls:"timeline-month",text:s}),f=createEl("span",{text:`${Object.keys(a).length} Entries`});o.appendChild(f),n.appendChild(o),Object.entries(a).forEach(([m,w])=>{let A=createEl("div",{cls:"timeline-section"}),S=createEl("div",{cls:"timeline-date",text:m});A.appendChild(S);let L=createEl("div",{cls:"row"});w.forEach($=>{var we,h,d,c,u;let G=$n($.details),de=createEl("div",{cls:"col-sm-4"}),H=createEl("div",{cls:"timeline-box"}),z=createEl("div",{cls:"box-title"}),j=createEl("div",{cls:"box-title-left"}),b=$.icon||G.icon?createEl("i",{cls:`box-title-icon text-${(h=$.status)!=null?h:(we=G.status)!=null?we:""}`,text:""}):null;b&&(0,_n.setIcon)(b,$.icon||G.icon);let et=createEl("div",{cls:"box-title-right",text:$.date.toTimeString().split(" ")[0]}),ue=createEl("div",{cls:"box-content"}),R=Sn($.details).split(`
`).filter(Boolean),x=Mn(R[0]);x&&R.shift(),R.forEach(l=>{ue.appendChild(createEl("p",{cls:"box-item",text:l}))});let ae=$.author||G.author?createEl("div",{cls:"box-footer",text:`- ${(d=$.author)!=null?d:G.author}`}):null;b&&j.appendChild(b),j.appendChild(document.createTextNode(` ${(u=$.title)!=null?u:(c=G.title)!=null?c:x!=null?x:""}`)),z.appendChild(j),z.appendChild(et),H.appendChild(z),H.appendChild(ue),ae&&H.appendChild(ae),de.appendChild(H),L.appendChild(de)}),A.appendChild(L),n.appendChild(A)})}),t}var Qr={useRegex:!1,reference:"created",sort:"asc",singleLine:!1},dt=class extends F.Plugin{async findReference(t){let n=new Date(t.stat.ctime),i=null;if(this.settings.useRegex)try{i=new RegExp(this.settings.reference)}catch(s){return n}return await this.app.fileManager.processFrontMatter(t,s=>{let a=null,o=f=>Mt.parseDate(f,n);if(i){let f=!1;for(let[m,w]of Object.entries(s))if(i.test(m)){f=!0,typeof w=="string"&&(a=o(w));break}f&&!a&&console.log("Invalid reference")}else s[this.settings.reference]&&(a=o(s[this.settings.reference]));a&&(n=a)}),n}async onload(){await this.loadSettings(),this.addSettingTab(new St(this.app,this));let t="timeline";this.registerMarkdownCodeBlockProcessor(t,async(n,i,s)=>{let a=this.app.workspace.getActiveFile();if(!a)return;let o=await this.app.vault.read(a),f=Cn(n),m=f.reference?Mt.parseDate(f.reference):null,w=f.sort?{ascending:"asc",descending:"desc"}[f.sort.toLowerCase()]||f.sort:null,A=w==="asc"||w==="desc"?w:this.settings.sort,{contentStart:S}=(0,F.getFrontMatterInfo)(o),L="```"+t+`
`+n+"\n```",$=n.length!=0&&Object.keys(f).length===0?n:o,G=m!=null?m:await this.findReference(a),de=$.slice(S).replace(L,"").split(this.settings.singleLine?`
`:`

`).map(z=>({details:z.trim(),date:Nn(z,G)})).filter(z=>z.date!=null),H=In(de,A);i.replaceWith(H)})}async loadSettings(){this.settings=Object.assign({},Qr,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},St=class extends F.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}display(){let{containerEl:t}=this;t.empty(),new F.Setting(t).setName("Use Regex").setDesc("If enabled, the reference setting will use regex to pick which property to use as the reference for dates based on the first regex match.").addToggle(n=>n.setValue(this.plugin.settings.useRegex).onChange(async i=>{this.plugin.settings.useRegex=i,await this.plugin.saveSettings()})),new F.Setting(t).setName("Reference").setDesc("Specify the property name or regex to find which property to use as the reference for dates, if available.").addText(n=>n.setPlaceholder("Enter tag (no hashtag #) or regex").setValue(this.plugin.settings.reference).onChange(async i=>{this.plugin.settings.reference=i,await this.plugin.saveSettings()})),new F.Setting(t).setName("Sorting").setDesc("The sorting to be used if not specified in source block").addDropdown(n=>n.addOptions({asc:"Ascending",desc:" Descending"}).setValue(this.plugin.settings.sort).onChange(async i=>{this.plugin.settings.sort=i,await this.plugin.saveSettings()})),new F.Setting(t).setName("Use single line").setDesc("If sections are seperated by single lines instead of double lines").addToggle(n=>n.setValue(this.plugin.settings.singleLine).onChange(async i=>{this.plugin.settings.singleLine=i,await this.plugin.saveSettings()}))}};

/* nosourcemap */